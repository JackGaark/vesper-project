<% @squad.squadchosenvenues.each do |venue| %>
<% chosen_venue = Venue.find(venue.venue_id) %>


  <div class="blog-card spring-fever mdl-shadow--2dp" data-venue-id="<%= venue.id %>">
    <div class="title-content">
      <h3><%= chosen_venue.name %></h3>
      <div class="intro">★★★</div>
      <div class="intro">$$$</div>
    </div>

    <div class="color-overlay"></div>
    <div class="card-info">
    <!-- Raised button with ripple -->
    <%= link_to venue_path(venue.id) do %>
      <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
        Info
      </button>
    <% end %>

    <!-- Raised button with ripple -->
      <button class="select-venue-btn mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" data-venue-id="<%= venue.id %>">
        Select
      </button>

    </div><!-- /.card-info -->
  </div><!-- /.blog-card -->

<% end %>


<script>

<% unless @squad.squadmembers.find_by(user: current_user).will_be_present %>

const venues = document.querySelectorAll('.blog-card');
const venuesBtn = document.querySelectorAll('.blog-card .select-venue-btn');

venuesBtn.forEach((btn) => {

  btn.addEventListener('click', (event) => {
    console.log(event);
    handleVenueClick(event);

  });
});

  const handleVenueClick = (event) => {

    venues.forEach((venue) => {
      venue.classList.remove('selected-venue');
    });

    event.currentTarget.parentElement.parentElement.classList.add('selected-venue');

  };

<% end %>
</script>
